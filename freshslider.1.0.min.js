(function(a){a.fn.freshslider=function(g){var A=this;var s=typeof g.range=="undefined"?false:g.range,k=!s,v=g.min||0,w=g.max||100,t=w-v,i=g.step||1,r=g.unit||"",l=typeof g.enabled=="undefined"?true:g.enabled,e=[0,1],q=typeof g.text=="undefined"?true:g.text,p=null;if(t<0){throw new Error()}var c=function(B){return B&&Object.prototype.toString.call(B)=="[object Function]"};var x=null;if(c(g.onchange)==true){x=g.onchange}var u=""+i;var m=0;if(u.indexOf(".")>=0){m=u.length-u.indexOf(".")-1}if(g.hasOwnProperty("value")){if(!k){if(g.value.length&&g.value.length==2){e[0]=(g.value[0]-v)/t;e[1]=(g.value[1]-v)/t}}else{e[1]=(g.value-v)/t}}else{if(k){e[1]=0.5}}if(s){p=this.html("<div class='fsslider'><div class='fsfull-value'></div><div class='fssel-value'></div><div class='fscaret fss-left'></div><div class='fscaret fss-right'></div></div>").find(".fsslider")}else{p=this.html("<div class='fsslider'><div class='fsfull-value'></div><div class='fssel-value'></div><div class='fscaret'></div></div>").find(".fsslider")}var d=a(this.find(".fscaret")[0]);var n=k?d:a(this.find(".fscaret")[1]);var y=this.find(".fssel-value");var z=function(B){return i*Math.round(B/i)};var j=function(B){return B.toFixed(m)};var h=function(){if(q){n.text((z(e[1]*t)+v).toFixed(m)+r);if(!k){d.text((z(e[0]*t)+v).toFixed(m)+r)}}var D=A.width(),C=d.outerWidth(),B=n.outerWidth(),E=D-(C+B)/2;y.css({left:e[0]*D,width:(e[1]-e[0])*D});d.css({left:e[0]*E+C/2,"margin-left":-(C/2),"z-index":b?0:1});n.css({left:e[1]*E+B/2,"margin-left":-(B/2),"z-index":b?1:0});if(x){if(k){x(z(e[1]*t)+v)}else{x(z(e[0]*t)+v,z(e[1]*t)+v)}}};var b=true;var o=false;this.mousedown(function(E){if(!l){return}o=true;var B=A.width(),I=d.outerWidth(),C=n.outerWidth(),H=B-(I+C)/2;var F=E.target;var J=F.className;var G=E.pageX-A.offset().left;var D=G-I/2;D=D<0?0:D>H?H:D;if(k){e[1]=D/H;b=true}else{switch(J){case"fscaret fss-left":b=false;e[0]=D/H;break;case"fscaret fss-right":b=true;e[1]=D/H;break;default:if(D<(e[0]+e[1])/2*H){b=false;e[0]=D/H}else{b=true;e[1]=D/H}}}h();if(event.preventDefault){event.preventDefault()}else{return false}});var f=function(){if(!l){return}o=false;e[1]=z(e[1]*t)/t;if(!k){e[0]=z(e[0]*t)/t}h()};a(document).mouseup(function(B){if(o){f()}});this.mousemove(function(E){if(!l){return}if(o){var B=A.width(),I=d.outerWidth(),C=n.outerWidth(),H=B-(I+C)/2;var F=E.target;var J=F.className;var G=E.pageX-A.offset().left;var D=G-I/2;D=D<0?0:D>H?H:D;if(k){e[1]=D/H;b=true}else{if(b){e[1]=D/H;if(e[1]<e[0]){e[1]=e[0]}}else{e[0]=D/H;if(e[0]>e[1]){e[0]=e[1]}}}h()}if(event.preventDefault){event.preventDefault()}else{return false}});this.getValue=function(){if(k){return[e[1]*t+v]}else{return[e[0]*t+v,e[1]*t+v]}};this.setValue=function(){if(!k){if(arguments.length>=2){e[0]=(arguments[0]-v)/t;e[1]=(arguments[1]-v)/t;h()}}else{e[1]=(arguments[0]-v)/t;h()}};this.setEnabled=function(B){l=typeof B=="undefined"?true:B;if(l){p.removeClass("fsdisabled")}else{p.addClass("fsdisabled")}};this.setEnabled(l);h();return this}}(jQuery));